# Предварительная схема базы данных

## Пользователи
*	`Users(Id, Login, HashPassword, SecretKey, FirstName, SecondName, DataBirthday, IsBlocked)`
*	`
FK_UserId, ...)`

## Сотрудники
*	`EmployeePositions(Id, Title)`\
Пример:
	*	_(1, SuperAdmin)_
	*	_(2, Admin)_
	*	_(3, Psychologist)_
	*	_(4, CopyWriter)_

*	`Employee(Id, FK_IdPosition, Login, HashPassword, IsBlocked)`

## Анкета пользователя
### 1 вариант
Хранить каждый вопрос в отдельной таблице
*	`Question1States(PK_Id, Title)`\
Пример:
	*	_(1, "Депрессия")_
	*	_(2, "Стресс")_

*	`Question1(PK_FK_UserId, PK_FK_StateId)`\
Пример;
	*	_(1, 0)_
	*	_(1, 1)_
	*	_(1, 2)_

*	`Question2(PK_FK_UserId, IsValue: bool)`\
Пример:
	*	_(1, 0)_
	*	_(2, 1)_
	*	_(3, 0)_	

### 2 вариант
Хранить все вопросы в одной таблице
*	`Quastions(PK_FK_UserId, Quastion1, Quastion2, ...)`

### Проблемы 2-ого варианта
*	Жесткая связь\
Необходимо знать все вопросы на этапе проектирования
*	Отсутствие гибкости\
Проблематично добавить новые вопросы после внедрения БД

## Расписание (Слоты)
### 1 вариант
При выборе слота пользователем делается update необходимого кортежа, и вместо `NULL` записывается `UserId`
*	`Slots(PK_Id, FK_PsychologistId, Date, Time, FK_UserId)`\
Пример:
	*	_(1, 1, 06.03.2023, 16:30, NULL)_
	*	_(2, 1, 06.03.2023, 18:30, NULL)_
	*	_(3, 1, 07.03.2023, 16:30, 2)_
	*	_(4, 2, 07.03.2023, 16:30, 3)_
### 2 вариант
Внедрение дополнительной таблицы для бронирования слота пользователем и удаление столбца `FK_UserId` из основной таблицы
*	`SlotsDop(PK_UserId, SlotId);`\
Пример:
	*	_(1, 3)_
	*	_(1, 4)_ - Exception MySql
	*	_(2, 1)_
### Проблема 1 варианта
*	Для поиска слота, который занял пользователь, необходимо в худшем случае обойти все кортежи
### Проблема 2 варианта
*	При поиске свободного слота могут возникнуть проблемы: слот может быть занят (т.е. находится в дополнительной таблице), а на самом деле его срок истек
*	Возможное решение проблемы: добавление в mysql функции, с помощью которой будут добавляться слоты. Она будет проверять слоты на актуальности и по необходимости удалять.